/**
 * @author: verdyckb @troti13
 * @name: TD.browser
 * @version: 0.0.1
 * @date: 17/01/12
 * @dependencies:
 * @copyright: These Days
 */

(function(b,a){a.os=(function(){var e,m,f,g,d,i,j,o,h,c,k,n,l;f={};e=navigator.appVersion.toLowerCase();m=navigator.userAgent.toLowerCase();g="win";i="mac";j="x11";d="linux";c="android";k="iphone";n="ipod";l="ipad";f.win=false;f.mac=false;f.unix=false;f.linux=false;f.android=false;f.ios=false;f.phone=false;f.iphone=false;f.ipad=false;f.name="unknown";f.version="unknown";if(e.indexOf(g)>-1){f.win=true}if(e.indexOf(i)>-1){f.mac=true}if(e.indexOf(j)>-1){f.unix=true}if(e.indexOf(d)>-1){f.linux=true}if(m.indexOf(c)>-1){f.android=true;f.phone=true}if(m.indexOf(n)>-1||m.indexOf(k)>-1||m.indexOf(l)>-1){f.ios=true;f.mac=false;f.phone=true;if(m.indexOf(n)>-1||m.indexOf(k)>-1){f.iphone=true}else{f.ipad=true}}if(f.win){if(e.indexOf("win16")>=-1){h="3.11"}if(e.indexOf("95")>=-1){h="95"}if(e.indexOf("98")>=-1){h="98"}if(e.indexOf("4.0")>=-1||e.indexOf("winnt")>=-1){h="NT 4.0"}if(e.indexOf("2000")>=-1||e.indexOf("nt 5.0")>=-1){h="2000"}if(e.indexOf(" me ")>=-1){h="ME"}if(e.indexOf("xp")>=-1||e.indexOf("nt 5.1")>=-1){h="XP"}if(e.indexOf("nt 5.2")>=-1){h="Server 2003"}if(e.indexOf("nt 6.0")>=-1){h="Vista"}if(e.indexOf("nt 7.0")>=-1||e.indexOf("nt 6.1")>=-1){h="7"}f.name="Microsoft Windows";f.version=h}if(f.mac){o=m.split("mac os x ");if(o[1]){h=o[1];h=h.split(";");if(h[0]){h=h[0];h=h.replace(/_/g,".")}if(h.indexOf(")")){h=h.split(")");h=h[0]}}else{h="unknown"}f.version="OS X "+h;f.name="Mac"}if(f.unix){f.name="Unix"}if(f.linux){f.name="Linux"}if(f.android){o=m.split("android ");if(o[1]){h=o[1].split(";");h=h[0]}f.version=h;f.name="Android"}if(f.ios){o=m.split(" os ");h=o[1];h=h.split(" ");if(h[0]){h=h[0];h=h.replace(/_/g,".")}f.version=h;f.name="iOS";if(f.iphone){f.name="iOS iPhone/iPod"}if(f.ipad){f.name="iOS iPad"}}return f}());b.TD=a}(window,window.TD||{}));(function(b,a){a.browser=(function(){var j,k,l,f,d,c,i,e,g,m,h;g={};j=navigator.appName.toLowerCase();l=navigator.userAgent.toLowerCase();k=navigator.vendor;g.webkit=false;g.chrome=false;g.safari=false;g.msie=false;g.firefox=false;g.opera=false;g.name="unknown";g.version="unknown";c="msie";i="firefox";e="presto";if(k){k=k.toLowerCase();f=k.indexOf("google");d=k.indexOf("apple");if(f>-1||d>-1){g.webkit=true;if(f>-1){g.chrome=true;g.name="Google Chrome"}if(d>-1){g.safari=true;g.name="Safari"}}}if(l.indexOf(c)>-1){g.msie=true;g.name="Microsoft Internet Explorer"}if(l.indexOf(i)>-1){g.firefox=true;g.name="Mozilla Firefox"}if(l.indexOf(e)>-1){g.opera=true;g.name="Opera"}if(g.msie){m=l.split("; ");if(m[1]){h=m[1].split(" ");if(h[1]){h=h[1]}}}if(g.opera){m=l.split("version/");if(m[1]){h=m[1]}}if(g.chrome){m=l.split("chrome/");if(m[1]){h=m[1].split(" ");if(h[0]){h=h[0]}}}if(g.safari){m=l.split("version/");if(m[1]){h=m[1].split(" ");if(h[0]){h=h[0]}}}if(g.firefox){m=l.split("firefox/");if(m[1]){h=m[1]}}if(h){g.version=h}return g}());b.TD=a}(window,window.TD||{}));(function(b,a,c){a.mq=(function(){var f={minRegex:/min-(device-){0,1}width:( *)(\d+)px/gi,maxRegex:/max-(device-){0,1}width:( *)(\d+)px/gi,windowWidth:b.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,stylesheets:document.styleSheets};f.init=function(){f.stylesheets=h(f.stylesheets);f.queries=g(f.stylesheets);d()};function h(o){var k,m,l,j,n;l=[];for(k=0,m=o.length;k<m;k+=1){j=o[k];n=j.media||"";if(j.media.mediaText&&j.media.mediaText.indexOf("print")>=0){continue}if(j.media.toString().indexOf("print")>=0){continue}l.push(j)}return l}function g(n){var m,q,v,p,u,k,s,w,t,l,o;v={};for(m=0,q=n.length;m<q;m+=1){s=n[m];if(s.media){if(s.media.hasOwnProperty("mediaText")){u=s.media.mediaText}else{u=""+s.media}if(u&&u.indexOf("print")<0){p={};p.min=u.match(f.minRegex);p.max=u.match(f.maxRegex);if(p.min||p.max){if(p.min){p.min=p.min[0].split(":")[1];p.min=parseInt(p.min,10)}else{p.min=0}if(p.max){p.max=p.max[0].split(":")[1];p.max=parseInt(p.max,10)}else{p.max="to infinity and beyond!"}p.query=u;v[p.min]=v[p.min]||[];v[p.min].push(p)}}}try{w=s.cssRules||s.rules||null}catch(r){a.log("Failed to parse stylesheet with error: ",r);return false}if(w){for(l=0,o=w.length;l<o;l+=1){t=w[l];if(!t.media){continue}k=t.media.mediaText||t.media;if(k.indexOf("print")>=0){continue}p={};p.min=k.match(f.minRegex);p.max=k.match(f.maxRegex);if(!p.min&&!p.max){continue}if(p.min){p.min=p.min[0].split(":")[1];p.min=parseInt(p.min,10)}else{p.min=0}if(p.max){p.max=p.max[0].split(":")[1];p.max=parseInt(p.max,10)}else{p.max="to infinity and beyond!"}p.query=k;v[p.min]=v[p.min]||[];v[p.min].push(p);v[p.min].sort(function(j,i){if(typeof j.max=="string"&&typeof i.max==typeof""){return 0}if(typeof j.max=="string"){return 1}if(typeof i.max=="string"){return 1}return j.max-i.max})}}}return v}function d(){var k,n,m,p,l,o,j;k=f.queries;f.windowWidth=b.innerWidth||document.body.clientWidth||document.documentElement.clientWidth;l=[];j=0;for(n in k){if(k.hasOwnProperty(n)){if(n<f.windowWidth){j+=1;l=k[n];f.screen=j}else{break}}}for(m=0,p=l.length;m<p;m+=1){o=l[m];if(typeof o.max=="string"||o.max>=f.windowWidth){f.currentMQ=o;break}}}function e(){f.windowWidth=b.innerWidth||document.body.clientWidth||document.documentElement.clientWidth;clearTimeout(f.resizeTimer);f.resizeTimer=setTimeout(d,10)}f.init();if(b.addEventListener){b.addEventListener("resize",e,true)}else{b.attachEvent("onresize",e)}b.TD=a;return f}())}(window,window.TD||{}));(function(e,b){var a;if(!b.mq.screen){alert("Found no responsive stylesheets, maybe I'm doing it wrong.");return false}function f(){var m,g,h,o,j,s,n,t,l,r,i,k,q,p;i=document.getElementById("td_plugin_sud_wrapper");if(i){return false}k=b.mq.currentMQ.min;q=b.mq.currentMQ.max;p=b.mq.windowWidth;if(typeof k!="string"){k+="px"}if(typeof q!="string"){q+="px"}if(typeof p!="string"){p+="px"}g=document.createElement("div");h=document.createElement("div");j=document.createElement("div");s=document.createElement("div");n=document.createElement("div");l=document.createElement("div");r=document.createElement("div");o=document.createElement("div");t=document.createElement("a");j.innerHTML=b.mq.screen;n.innerHTML=b.browser.name+" "+b.browser.version;l.innerHTML=b.os.name+" "+b.os.version;r.innerHTML='<span style="font-size:12px; margin-right:10px;">min: '+k+'</span><span style="font-size:12px; margin-right:10px;">max: '+q+'</span><span style="font-size:12px;">current:'+p+"</span>";t.innerHTML="close x";g.style.background="#333333";g.style.color="#FFFFFF";g.style.font="bold 14px/normal sans-serif";g.style.left="10px";g.style.opacity="0.6";g.style.padding="10px";g.style.position="fixed";g.style.top="10px";g.style.zIndex="999999";g.style.filter="alpha(opacity=60,style=0)";g.id="td_plugin_sud_wrapper";t.style.color="#FFFFFF";t.style.font="normal 10px/normal sans-serif";t.style.position="absolute";t.style.right="12px";t.style.textDecoration="none";t.style.top="5px";t.id="td_plugin_sud_close";t.href="#";o.style.clear="both";j.style.fontSize="50px";j.style.cssFloat="left";j.style.padding="25px";j.style.width="50px";j.id="td_plugin_sud_screen";s.style.cssFloat="right";s.style.width="200px";n.style.borderBottom="1px solid #FFFFFF";n.style.padding="20px 5px";r.id="td_plugin_sud_mqinfo";l.style.padding="20px 5px";s.appendChild(n);s.appendChild(l);h.appendChild(j);h.appendChild(s);g.appendChild(t);g.appendChild(h);g.appendChild(o);g.appendChild(r);document.body.appendChild(g);if(e.addEventListener){e.addEventListener("resize",d,true);document.getElementById("td_plugin_sud_close").addEventListener("click",c,true)}else{e.attachEvent("onresize",d);document.getElementById("td_plugin_sud_close").attachEvent("onclick",c)}}function c(g){var h=document.getElementById("td_plugin_sud_wrapper");g.preventDefault();document.body.removeChild(h)}function d(){clearTimeout(a);a=setTimeout(function(){var h,j,i,g,k;h=document.getElementById("td_plugin_sud_screen");h.innerHTML=b.mq.screen;i=b.mq.currentMQ.min;g=b.mq.currentMQ.max;k=b.mq.windowWidth;if(typeof i!="string"){i+="px"}if(typeof g!="string"){g+="px"}if(typeof k!="string"){k+="px"}j=document.getElementById("td_plugin_sud_mqinfo");j.innerHTML='<span style="font-size:12px; margin-right:10px;">min: '+i+'</span><span style="font-size:12px; margin-right:10px;">max: '+g+'</span><span style="font-size:12px;">current:'+k+"</span>"},10)}if(e.document.readyState==="complete"){f()}else{e.onload=f}}(window,window.TD||{}));